{% extends 'base.html' %}
{% block content %}

<h1>Meals for {{ month }} {{ curDay }}, {{ curYear }}</h1>

<table>
    <caption>
        Available Caption
    </caption>
    <thead>
        <tr>
            <td></td>
            <th id="stud" scope="col">
                Calories
            </th>
            <th id="apt" scope="col">
                Carbs
            </th>
            <th id="chal" scope="col">
                Protein
            </th>
            <th id="villa" scope="col">
                Weight(grams)
            </th>
            <th id="villa" scope="col">
                Servings
            </th>
            <th id="villa" scope="col">
                Favorite?
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th id="par" class="span" colspan="5" scope="colgroup">
                Breakfast
            </th>
        </tr>
        {% for meal in meals %}
            {% if meal.mealType == "B" %}
                {% for food in meal.food.all %}
                <tr>
                    <th headers="par" id="pbed1">
                        {{food.name}}
                    </th>
                    <td headers="par pbed1 stud">
                        {{food.calories}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.carbs}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.protein}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.amount}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.servings}}
                    </td>
                </tr>
                {% endfor %}
            {% endif %}
        {% endfor %}
        <tr> 
            <th id="rome" class="span" colspan="5" scope="colgroup">
                Lunch
            </th>
        </tr>
        {% for meal in meals %}
            {% if meal.mealType == "L" %}
                {% for food in meal.food.all %}
                <tr>
                    <th headers="par" id="pbed1">
                        {{food.name}}
                    </th>
                    <td headers="par pbed1 stud">
                        {{food.calories}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.carbs}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.protein}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.amount}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.servings}}
                    </td>
                </tr>
                {% endfor %}
            {% endif %}
        {% endfor %}
        <tr>
            <th id="rome" class="span" colspan="5" scope="colgroup">
                Dinner
            </th>
        </tr>
        {% for meal in meals %}
            {% if meal.mealType == "D" %}
                {% for food in meal.food.all %}
                <tr>
                    <th headers="par" id="pbed1">
                        {{food}}
                    </th>
                    <td headers="par pbed1 stud">
                        {{food.calories}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.carbs}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.protein}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.amount}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.servings}}
                    </td>
                </tr>
                {% endfor %}
            {% endif %}
        {% endfor %}
        <tr>
            <th id="rome" class="span" colspan="5" scope="colgroup">
                Additional Meal
            </th>
        </tr>
        {% for meal in meals %}
            {% if meal.mealType == "A" %}
                {% for food in meal.food.all %}
                <tr>
                    <th headers="par" id="pbed1">
                        {{food.name}}
                    </th>
                    <td headers="par pbed1 stud">
                        {{food.calories}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.carbs}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.protein}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.amount}}
                    </td>
                    <td headers="par pbed1 stud">
                        {{food.servings}}
                    </td>
                </tr>
                {% endfor %}
            {% endif %}
        {% endfor %}
    </tbody>
</table>

<h5 style="color: white">Available Foods</h5>
<form action="{% url 'assoc_food' curMonth curDay curYear %}" method="POST">
    {% csrf_token %}
    {{ meal_form.as_p }}
    <select name="foodChoice" style="display: block; width: 20vw;">
        {% for food in foods.all %}
            <option value="{{ food.name }}">{{ food.name }}</option>
        {% endfor %}
    </select>
    {{ meal_food_item_form.as_p }}
    <button type="submit" class="btn">Add</button>
</form>

<script>
    const selectEl = document.getElementById('id_mealType');
    M.FormSelect.init(selectEl);
</script>

{% endblock %}
